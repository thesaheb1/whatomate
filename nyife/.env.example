# ═══════════════════════════════════════════════════════════════════════════
# NYIFE — Root Environment Configuration Template
# Copy this file to .env and fill in all values before running.
# NEVER commit .env to version control.
# ═══════════════════════════════════════════════════════════════════════════

NODE_ENV=development
LOG_LEVEL=debug

# ─── MySQL (shared infrastructure) ──────────────────────────────────────────
MYSQL_ROOT_PASSWORD=root_password_change_me
MYSQL_HOST=mysql
MYSQL_PORT=3306

# Each service gets its own DB user and database (principle of least privilege)
# auth-service
AUTH_DB_NAME=nyife_auth
AUTH_DB_USER=nyife_auth
AUTH_DB_PASS=auth_pass_change_me

# user-service
USER_DB_NAME=nyife_user
USER_DB_USER=nyife_user
USER_DB_PASS=user_pass_change_me

# organization-service
ORG_DB_NAME=nyife_org
ORG_DB_USER=nyife_org
ORG_DB_PASS=org_pass_change_me

# admin-service
ADMIN_DB_NAME=nyife_admin
ADMIN_DB_USER=nyife_admin
ADMIN_DB_PASS=admin_pass_change_me

# subscription-service
SUB_DB_NAME=nyife_subscription
SUB_DB_USER=nyife_subscription
SUB_DB_PASS=sub_pass_change_me

# wallet-service
WALLET_DB_NAME=nyife_wallet
WALLET_DB_USER=nyife_wallet
WALLET_DB_PASS=wallet_pass_change_me

# payment-service
PAYMENT_DB_NAME=nyife_payment
PAYMENT_DB_USER=nyife_payment
PAYMENT_DB_PASS=payment_pass_change_me

# whatsapp-service
WA_DB_NAME=nyife_whatsapp
WA_DB_USER=nyife_whatsapp
WA_DB_PASS=wa_pass_change_me

# contact-service
CONTACT_DB_NAME=nyife_contact
CONTACT_DB_USER=nyife_contact
CONTACT_DB_PASS=contact_pass_change_me

# template-service
TEMPLATE_DB_NAME=nyife_template
TEMPLATE_DB_USER=nyife_template
TEMPLATE_DB_PASS=template_pass_change_me

# campaign-service
CAMPAIGN_DB_NAME=nyife_campaign
CAMPAIGN_DB_USER=nyife_campaign
CAMPAIGN_DB_PASS=campaign_pass_change_me

# message-service
MESSAGE_DB_NAME=nyife_message
MESSAGE_DB_USER=nyife_message
MESSAGE_DB_PASS=message_pass_change_me

# chat-service
CHAT_DB_NAME=nyife_chat
CHAT_DB_USER=nyife_chat
CHAT_DB_PASS=chat_pass_change_me

# automation-service
AUTOMATION_DB_NAME=nyife_automation
AUTOMATION_DB_USER=nyife_automation
AUTOMATION_DB_PASS=automation_pass_change_me

# notification-service
NOTIF_DB_NAME=nyife_notification
NOTIF_DB_USER=nyife_notification
NOTIF_DB_PASS=notif_pass_change_me

# support-service
SUPPORT_DB_NAME=nyife_support
SUPPORT_DB_USER=nyife_support
SUPPORT_DB_PASS=support_pass_change_me

# analytics-service
ANALYTICS_DB_NAME=nyife_analytics
ANALYTICS_DB_USER=nyife_analytics
ANALYTICS_DB_PASS=analytics_pass_change_me

# api-gateway
GATEWAY_DB_NAME=nyife_gateway
GATEWAY_DB_USER=nyife_gateway
GATEWAY_DB_PASS=gateway_pass_change_me

# ─── Redis ────────────────────────────────────────────────────────────────────
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
# Redis namespace prefixes (each service uses its own prefix)
REDIS_PREFIX_AUTH=auth
REDIS_PREFIX_SESSION=session
REDIS_PREFIX_CACHE=cache
REDIS_PREFIX_RATELIMIT=rl

# ─── Kafka ────────────────────────────────────────────────────────────────────
KAFKA_BROKERS=kafka:9092
KAFKA_CLIENT_ID_PREFIX=nyife

# ─── JWT Secrets (MUST be 32+ chars, MUST be different per token type) ────────
JWT_ACCESS_SECRET=change_me_access_secret_min_32_chars_xxxxxxxxxxx
JWT_REFRESH_SECRET=change_me_refresh_secret_min_32_chars_xxxxxxxxxx
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
# Admin JWT (completely separate from user JWT)
ADMIN_JWT_SECRET=change_me_admin_secret_min_32_chars_xxxxxxxxxxxx
ADMIN_JWT_EXPIRY=8h

# ─── Encryption (AES-256 for access tokens stored in DB) ─────────────────────
ENCRYPTION_KEY=change_me_encryption_key_must_be_32_chars_minimum

# ─── CSRF ─────────────────────────────────────────────────────────────────────
CSRF_SECRET=change_me_csrf_secret_min_32_chars_xxxxxxxxxxxxxxx

# ─── Cookie Settings ──────────────────────────────────────────────────────────
COOKIE_DOMAIN=                      # e.g. .nyife.com in production
COOKIE_SECURE=false                 # Set true in production (HTTPS only)
COOKIE_SAME_SITE=strict

# ─── API Gateway ──────────────────────────────────────────────────────────────
GATEWAY_PORT=3000
GATEWAY_CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ─── Service Ports ───────────────────────────────────────────────────────────
AUTH_SERVICE_PORT=3001
USER_SERVICE_PORT=3002
ORG_SERVICE_PORT=3003
ADMIN_SERVICE_PORT=3004
SUB_SERVICE_PORT=3005
WALLET_SERVICE_PORT=3006
PAYMENT_SERVICE_PORT=3007
WA_SERVICE_PORT=3008
CONTACT_SERVICE_PORT=3009
TEMPLATE_SERVICE_PORT=3010
CAMPAIGN_SERVICE_PORT=3011
MESSAGE_SERVICE_PORT=3012
CHAT_SERVICE_PORT=3013
AUTOMATION_SERVICE_PORT=3014
NOTIF_SERVICE_PORT=3015
SUPPORT_SERVICE_PORT=3016
ANALYTICS_SERVICE_PORT=3017

# ─── Service Internal URLs (docker network) ──────────────────────────────────
AUTH_SERVICE_URL=http://auth-service:3001
USER_SERVICE_URL=http://user-service:3002
ORG_SERVICE_URL=http://organization-service:3003
ADMIN_SERVICE_URL=http://admin-service:3004
SUBSCRIPTION_SERVICE_URL=http://subscription-service:3005
WALLET_SERVICE_URL=http://wallet-service:3006
PAYMENT_SERVICE_URL=http://payment-service:3007
WHATSAPP_SERVICE_URL=http://whatsapp-service:3008
CONTACT_SERVICE_URL=http://contact-service:3009
TEMPLATE_SERVICE_URL=http://template-service:3010
CAMPAIGN_SERVICE_URL=http://campaign-service:3011
MESSAGE_SERVICE_URL=http://message-service:3012
CHAT_SERVICE_URL=http://chat-service:3013
AUTOMATION_SERVICE_URL=http://automation-service:3014
NOTIFICATION_SERVICE_URL=http://notification-service:3015
SUPPORT_SERVICE_URL=http://support-service:3016
ANALYTICS_SERVICE_URL=http://analytics-service:3017

# ─── Meta / WhatsApp ──────────────────────────────────────────────────────────
META_BASE_URL=https://graph.facebook.com
META_DEFAULT_API_VERSION=v21.0
META_WEBHOOK_VERIFY_TOKEN=change_me_webhook_verify_token_global
# Facebook App credentials (for Embedded Signup JS SDK)
FACEBOOK_APP_ID=your_facebook_app_id
FACEBOOK_APP_SECRET=your_facebook_app_secret
# Webhook callback URL (public — must be HTTPS in production)
WEBHOOK_BASE_URL=https://your-domain.com

# ─── OAuth (Social Login) ─────────────────────────────────────────────────────
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3000/api/v1/auth/oauth/google/callback

FACEBOOK_OAUTH_APP_ID=your_facebook_oauth_app_id
FACEBOOK_OAUTH_APP_SECRET=your_facebook_oauth_app_secret
FACEBOOK_CALLBACK_URL=http://localhost:3000/api/v1/auth/oauth/facebook/callback

# ─── Payment Gateways ─────────────────────────────────────────────────────────
# Razorpay
RAZORPAY_KEY_ID=rzp_test_xxxxxxxxxxxxxxxxxx
RAZORPAY_KEY_SECRET=your_razorpay_key_secret
RAZORPAY_WEBHOOK_SECRET=your_razorpay_webhook_secret

# Stripe
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxx

# ─── Tax Configuration ────────────────────────────────────────────────────────
TAX_ENABLED=true
TAX_NAME=GST
TAX_PERCENTAGE=18
TAX_INCLUSIVE=false           # true = price includes tax; false = tax added on top
TAX_APPLY_SUBSCRIPTION=true
TAX_APPLY_WALLET=true

# ─── SMTP ─────────────────────────────────────────────────────────────────────
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false             # true for port 465 (SSL), false for STARTTLS
SMTP_USER=noreply@example.com
SMTP_PASS=your_smtp_password
SMTP_FROM_NAME=Nyife
SMTP_FROM_EMAIL=noreply@example.com

# ─── File Upload ──────────────────────────────────────────────────────────────
UPLOAD_BASE_PATH=./uploads    # local storage root (organized by service/entity)
MAX_FILE_SIZE_MB=16
ALLOWED_MEDIA_TYPES=image/jpeg,image/png,image/webp,video/mp4,audio/ogg,audio/aac,audio/mpeg,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# ─── Frontend URL (for email links, CORS) ────────────────────────────────────
FRONTEND_URL=http://localhost:5173
ADMIN_FRONTEND_URL=http://localhost:5174

# ─── Default Super Admin (seeded on first run) ───────────────────────────────
DEFAULT_SUPER_ADMIN_EMAIL=superadmin@nyife.com
DEFAULT_SUPER_ADMIN_PASSWORD=SuperAdmin@123!   # CHANGE THIS IN PRODUCTION
DEFAULT_SUPER_ADMIN_NAME=Super Admin
